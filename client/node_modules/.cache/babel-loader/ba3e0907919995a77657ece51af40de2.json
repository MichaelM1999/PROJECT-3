{"ast":null,"code":"var _jsxFileName = \"/Users/michaelmariea/Desktop/PROJECT-3/project3/client/src/components/stockrec.js\";\nimport React, { Component } from 'react';\nimport '../css/recomend.css';\nimport API from '../utils/stockApi';\n\nclass Recomend extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      stock: \"\",\n      stockArry: [\"AMZN\", \"GOOGL\", \"NFLX\", \"GOOG\", \"JNJ\", \"BRK.B\", \"JPM\", \"DIS\"],\n      value: \"\",\n      changePercentage: \"\",\n      priceArray: \"\",\n      dateArray: \"\",\n      upDown: \"\",\n      stockNumber: 'positive'\n    };\n\n    this.searchData = query => {\n      const priceArray = [];\n      const dateArray = [];\n      API.search(query).then(res => {\n        const dailySeries = res.data[\"Time Series (Daily)\"];\n\n        for (let key in dailySeries) {\n          // console.log('Time: ', key, 'price: ' ,dailySeries[key]['4. close']);\n          dateArray.push([key][0]);\n          priceArray.push(dailySeries[key]['4. close']);\n        }\n\n        this.setState({\n          priceArray: priceArray,\n          dateArray: dateArray\n        });\n        this.setState({\n          changePercentage: (this.state.priceArray[0] / this.state.priceArray[1] * 100 - 100).toString().slice(0, 4) + \"%\"\n        });\n        console.log(this.state.changePercentage);\n      });\n\n      if (Math.sign(this.state.changePercentage) === 1) {\n        this.setState({\n          upDown: \"up\"\n        });\n      } else {\n        this.setState({\n          upDown: \"down\"\n        });\n      }\n\n      if (this.state.upDown === \"up\") {}\n    };\n\n    this.currentStock = () => {\n      let i = 0;\n      const interval = setInterval(() => {\n        console.log(this.state.stockArry[i]);\n        let switchedStock = this.state.stockArry[i];\n        i += 1;\n        this.setState({\n          stock: switchedStock\n        });\n        this.searchData(this.state.stock);\n\n        if (i >= this.state.stockArry.length) {\n          clearInterval(interval);\n          this.currentStock();\n        }\n      }, 13000);\n    };\n  }\n\n  componentDidMount() {\n    this.currentStock();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"recomendBX\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"stockTxt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Popular Stocks\"), React.createElement(\"h3\", {\n      className: \"stockTxt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, this.state.stock), React.createElement(\"p\", {\n      className: \"changepercent stockTxt {this.state.stockNumber}\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, this.state.changePercentage));\n  }\n\n}\n\nexport default Recomend;","map":{"version":3,"sources":["/Users/michaelmariea/Desktop/PROJECT-3/project3/client/src/components/stockrec.js"],"names":["React","Component","API","Recomend","state","stock","stockArry","value","changePercentage","priceArray","dateArray","upDown","stockNumber","searchData","query","search","then","res","dailySeries","data","key","push","setState","toString","slice","console","log","Math","sign","currentStock","i","interval","setInterval","switchedStock","length","clearInterval","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/recomend.css';\nimport API from '../utils/stockApi';\n\nclass Recomend extends Component{\n\n  componentDidMount(){\n    this.currentStock();\n  }\n  \n  state = {\n    stock: \"\",\n    stockArry :[\"AMZN\",\"GOOGL\",\"NFLX\",\"GOOG\",\"JNJ\",\"BRK.B\",\"JPM\",\"DIS\"],\n    value: \"\",\n    changePercentage: \"\",\n    priceArray: \"\",\n    dateArray: \"\",\n    upDown: \"\",\n    stockNumber: 'positive'\n  }\n  \n  searchData = query => {\n    const priceArray = [];\n    const dateArray = [];\n    API.search(query)\n    .then(res => {\n      const dailySeries = res.data[\"Time Series (Daily)\"];\n      for (let key in dailySeries){\n        // console.log('Time: ', key, 'price: ' ,dailySeries[key]['4. close']);\n        dateArray.push([key][0])\n        priceArray.push(dailySeries[key]['4. close']);\n      }\n    this.setState({priceArray: priceArray,\n        dateArray: dateArray,\n    })\n    this.setState({changePercentage: (((this.state.priceArray[0])/(this.state.priceArray[1])*100)-100).toString().slice(0,4)+\"%\"})\n    console.log(this.state.changePercentage)\n    })\n    if (Math.sign(this.state.changePercentage) === 1){\n      this.setState({upDown: \"up\"})\n    } else {\n      this.setState({upDown: \"down\"})\n    }\n    if (this.state.upDown === \"up\") {\n\n    }\n  }\n    \n  currentStock = () => {\n    let i = 0;\n    const interval = setInterval(() => {\n    console.log(this.state.stockArry[i]);\n    let switchedStock = this.state.stockArry[i];\n    i += 1;\n    this.setState({\n      stock: switchedStock\n    });\n    this.searchData(this.state.stock)\n    if (i >= this.state.stockArry.length) {\n      clearInterval(interval)\n      this.currentStock();\n      \n    }\n    }, 13000);\n  }\n\n    render(){\n\n      return(\n        <div className=\"recomendBX\">\n          <p className=\"stockTxt\">Popular Stocks</p>\n          <h3 className=\"stockTxt\">{this.state.stock}</h3>\n        <p className=\"changepercent stockTxt {this.state.stockNumber}\">\n          {this.state.changePercentage}\n        </p>\n        </div>\n    )\n  }\n}\nexport default Recomend"]},"metadata":{},"sourceType":"module"}