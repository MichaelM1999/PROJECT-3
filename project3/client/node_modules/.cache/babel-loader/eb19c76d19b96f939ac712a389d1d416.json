{"ast":null,"code":"var _jsxFileName = \"/Users/michaelmariea/Desktop/PROJECT-3/project3/client/src/components/pages/search.js\";\nimport React, { Component } from 'react';\nimport API from '../../utils/stockApi';\nimport * as moment from 'moment';\nimport createPlotlyComponent from 'react-plotly.js/factory';\nconst Plotly = window.Plotly;\nconst Plot = createPlotlyComponent(Plotly); //time js for recent date so even on weekends it gets correct numbers\n\nconst year = moment().format(\"YYYY\");\nconst month = moment().format(\"MM\");\nconst day = moment().format(\"DD\");\nlet todaysdate;\nconst dayofweek = moment().format(\"dddd\");\n\nif (dayofweek === \"Monday\" || dayofweek === \"Tuesday\" || dayofweek === \"Wednesday\" || dayofweek === \"Thursday\" || dayofweek === \"Friday\") {\n  todaysdate = [year, month, day].join('-');\n}\n\nif (dayofweek === \"Sunday\") {\n  let recentday = moment().subtract(2, 'days').format(\"DD\");\n  todaysdate = [year, month, recentday].join('-');\n}\n\nif (dayofweek === \"Saturday\") {\n  let recentday = moment().subtract(1, 'days').format(\"DD\");\n  todaysdate = [year, month, recentday].join('-');\n}\n\nclass Search extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      StockName: \"\",\n      price: \"\",\n      volume: \"\",\n      priceArray: \"\",\n      dateArray: \"\"\n    };\n\n    this.handleInputChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.stocksearch = query => {\n      const priceArray = [];\n      const dateArray = [];\n      API.search(query).then(res => {\n        const dailySeries = res.data[\"Time Series (Daily)\"];\n\n        for (let key in dailySeries) {\n          // console.log('Time: ', key, 'price: ' ,dailySeries[key]['4. close']);\n          dateArray.push([key][0]);\n          priceArray.push(dailySeries[key]['4. close']);\n        }\n\n        this.setState({\n          priceArray: priceArray,\n          dateArray: dateArray\n        });\n        this.setState({\n          price: res.data[\"Time Series (Daily)\"][todaysdate][\"4. close\"],\n          volume: res.data[\"Time Series (Daily)\"][todaysdate][\"6. volume\"],\n          StockName: res.data[\"Meta Data\"][\"2. Symbol\"]\n        }, console.log(res), console.log(this.state));\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      let stock = this.state.StockName;\n      this.stocksearch(stock);\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, this.state.todaysdate), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"what would you like to search for\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"StockName\",\n      onChange: this.handleInputChange,\n      value: this.state.StockName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      value: \"submit\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Search\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"searching for \", this.state.StockName), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"The Price is $\", this.state.price), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"there are currently \", this.state.volume, \" open for purchase\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Plot //weekly graph\n    , {\n      className: \"weekly\",\n      data: [{\n        //prices\n        x: [this.state.dateArray[0], this.state.dateArray[1], this.state.dateArray[2], this.state.dateArray[3], this.state.dateArray[4], this.state.dateArray[5], this.state.dateArray[6]],\n        //dates \n        y: [this.state.priceArray[0], this.state.priceArray[1], this.state.priceArray[2], this.state.priceArray[3], this.state.priceArray[4], this.state.priceArray[5], this.state.priceArray[6]],\n        type: 'scatter'\n      }],\n      layout: {\n        width: 320,\n        height: 240,\n        title: this.state.StockName,\n        transition: {\n          duration: 500,\n          easing: 'cubic-in-out'\n        },\n        frame: {\n          duration: 500\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Plot, {\n      className: \"monthly\",\n      data: [{\n        x: [this.state.dateArray[0], this.state.dateArray[1], this.state.dateArray[2], this.state.dateArray[3], this.state.dateArray[4], this.state.dateArray[5], this.state.dateArray[6], this.state.dateArray[7], this.state.dateArray[8], this.state.dateArray[9], this.state.dateArray[10], this.state.dateArray[11], this.state.dateArray[12], this.state.dateArray[13], this.state.dateArray[14], this.state.dateArray[15], this.state.dateArray[16], this.state.dateArray[17], this.state.dateArray[18], this.state.dateArray[19], this.state.dateArray[20], this.state.dateArray[21], this.state.dateArray[22], this.state.dateArray[23], this.state.dateArray[24], this.state.dateArray[25], this.state.dateArray[26], this.state.dateArray[27], this.state.dateArray[28], this.state.dateArray[29]],\n        //dates \n        y: [this.state.priceArray[0], this.state.priceArray[1], this.state.priceArray[2], this.state.priceArray[3], this.state.priceArray[4], this.state.priceArray[5], this.state.priceArray[6], this.state.priceArray[7], this.state.priceArray[8], this.state.priceArray[9], this.state.priceArray[10], this.state.priceArray[11], this.state.priceArray[12], this.state.priceArray[13], this.state.priceArray[14], this.state.priceArray[15], this.state.priceArray[16], this.state.priceArray[17], this.state.priceArray[18], this.state.priceArray[19], this.state.priceArray[20], this.state.priceArray[21], this.state.priceArray[22], this.state.priceArray[23], this.state.priceArray[24], this.state.priceArray[25], this.state.priceArray[26], this.state.priceArray[27], this.state.priceArray[28], this.state.priceArray[29]],\n        type: 'scatter'\n      }],\n      layout: {\n        width: 500,\n        height: 500,\n        title: this.state.StockName,\n        transition: {\n          duration: 500,\n          easing: 'cubic-in-out'\n        },\n        frame: {\n          duration: 500\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/michaelmariea/Desktop/PROJECT-3/project3/client/src/components/pages/search.js"],"names":["React","Component","API","moment","createPlotlyComponent","Plotly","window","Plot","year","format","month","day","todaysdate","dayofweek","join","recentday","subtract","Search","state","StockName","price","volume","priceArray","dateArray","handleInputChange","event","target","name","value","setState","stocksearch","query","search","then","res","dailySeries","data","key","push","console","log","err","handleSubmit","preventDefault","stock","render","x","y","type","width","height","title","transition","duration","easing","frame"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport API from '../../utils/stockApi';\nimport * as moment from 'moment';\nimport createPlotlyComponent from 'react-plotly.js/factory';\nconst Plotly = window.Plotly;\nconst Plot = createPlotlyComponent(Plotly);\n\n//time js for recent date so even on weekends it gets correct numbers\nconst year = moment().format(\"YYYY\");\nconst month = moment().format(\"MM\");\nconst day = moment().format(\"DD\");\nlet todaysdate;\n\nconst dayofweek = moment().format(\"dddd\");\nif (dayofweek === \"Monday\" || \ndayofweek === \"Tuesday\" || \ndayofweek === \"Wednesday\" || \ndayofweek === \"Thursday\" || \ndayofweek === \"Friday\") {\ntodaysdate = [year, month, day].join('-');\n}\nif (dayofweek === \"Sunday\") {\n   let recentday = (moment().subtract(2, 'days').format(\"DD\"));\n   todaysdate = [year, month, recentday].join('-');\n}\nif (dayofweek === \"Saturday\") {\n    let recentday = (moment().subtract(1, 'days').format(\"DD\"));\n    todaysdate = [year, month, recentday].join('-');\n}\nclass Search extends Component{\n    state = {\n        StockName: \"\",\n        price:\"\",\n        volume: \"\",\n        priceArray: \"\",\n        dateArray: \"\",\n    }\n    handleInputChange = event => {\n        const { name, value } = event.target;\n        this.setState({\n          [name]: value\n        });\n    }\n    stocksearch = query => {\n        const priceArray = [];\n        const dateArray = [];\n        API.search(query)\n        .then(res => {\n            \n            \n        const dailySeries = res.data[\"Time Series (Daily)\"];\n        \n        for (let key in dailySeries){\n            // console.log('Time: ', key, 'price: ' ,dailySeries[key]['4. close']);\n            dateArray.push([key][0])\n            priceArray.push(dailySeries[key]['4. close']);\n        }\n        this.setState({priceArray: priceArray,\n            dateArray: dateArray,\n        })\n          \n        this.setState({ price: res.data[\"Time Series (Daily)\"][todaysdate][\"4. close\"],\n                volume: res.data[\"Time Series (Daily)\"][todaysdate][\"6. volume\"],\n                StockName: res.data[\"Meta Data\"][\"2. Symbol\"]},\n                console.log(res),\n                console.log(this.state),\n                )\n    \n        },\n      err => {\n        console.log(err);\n     }); \n    }\n\n    handleSubmit = event => {\n        event.preventDefault()\n        let stock = this.state.StockName\n        this.stocksearch(stock);\n    }\n    render(){\n        return(\n            <div>\n                <h1>{this.state.todaysdate}</h1>\n                <div>what would you like to search for</div>\n                <input\n                type=\"text\"\n                name=\"StockName\"\n                onChange={this.handleInputChange}\n                value={this.state.StockName}\n                ></input>\n                <button \n                type=\"submit\" \n                value=\"submit\"\n                onClick={this.handleSubmit}\n                >Search</button>\n                <h2>\n                    searching for {(this.state.StockName)}\n                </h2>\n                <h3>\n                    The Price is ${this.state.price}\n                </h3>\n                <h3>\n                    there are currently {this.state.volume} open for purchase\n                </h3>\n                <div\n\n                ></div>\n                <Plot\n                //weekly graph\n                className=\"weekly\"\n                data={[{\n                    //prices\n                    x: [this.state.dateArray[0],\n                        this.state.dateArray[1],\n                        this.state.dateArray[2],\n                        this.state.dateArray[3],\n                        this.state.dateArray[4],\n                        this.state.dateArray[5],\n                        this.state.dateArray[6],\n                        ],\n                    //dates \n                    y: [this.state.priceArray[0], \n                        this.state.priceArray[1], \n                        this.state.priceArray[2],\n                        this.state.priceArray[3],\n                        this.state.priceArray[4],\n                        this.state.priceArray[5],\n                        this.state.priceArray[6]\n                        ],   \n                    type: 'scatter'\n                    }]}\n                layout={{width: 320,\n                        height: 240, \n                        title: this.state.StockName,\n                        transition: {\n                        duration: 500,\n                        easing: 'cubic-in-out'\n                        },\n                        frame: {\n                        duration: 500\n                        }}}  \n                />\n                <Plot\n                    className=\"monthly\"\n                    data={[{ \n                    x: [this.state.dateArray[0],\n                    this.state.dateArray[1],\n                    this.state.dateArray[2],\n                    this.state.dateArray[3],\n                    this.state.dateArray[4],\n                    this.state.dateArray[5],\n                    this.state.dateArray[6],\n                    this.state.dateArray[7],\n                    this.state.dateArray[8],\n                    this.state.dateArray[9],\n                    this.state.dateArray[10],\n                    this.state.dateArray[11],\n                    this.state.dateArray[12],\n                    this.state.dateArray[13],\n                    this.state.dateArray[14],\n                    this.state.dateArray[15],\n                    this.state.dateArray[16],\n                    this.state.dateArray[17],\n                    this.state.dateArray[18],\n                    this.state.dateArray[19],\n                    this.state.dateArray[20],\n                    this.state.dateArray[21],\n                    this.state.dateArray[22],\n                    this.state.dateArray[23],\n                    this.state.dateArray[24],\n                    this.state.dateArray[25],\n                    this.state.dateArray[26],\n                    this.state.dateArray[27],\n                    this.state.dateArray[28],\n                    this.state.dateArray[29],\n                    ],\n                //dates \n                y: [this.state.priceArray[0],\n                this.state.priceArray[1],\n                this.state.priceArray[2],\n                this.state.priceArray[3],\n                this.state.priceArray[4],\n                this.state.priceArray[5],\n                this.state.priceArray[6],\n                this.state.priceArray[7],\n                this.state.priceArray[8],\n                this.state.priceArray[9],\n                this.state.priceArray[10],\n                this.state.priceArray[11],\n                this.state.priceArray[12],\n                this.state.priceArray[13],\n                this.state.priceArray[14],\n                this.state.priceArray[15],\n                this.state.priceArray[16],\n                this.state.priceArray[17],\n                this.state.priceArray[18],\n                this.state.priceArray[19],\n                this.state.priceArray[20],\n                this.state.priceArray[21],\n                this.state.priceArray[22],\n                this.state.priceArray[23],\n                this.state.priceArray[24],\n                this.state.priceArray[25],\n                this.state.priceArray[26],\n                this.state.priceArray[27],\n                this.state.priceArray[28],\n                this.state.priceArray[29],\n                    ],   \n                    type: 'scatter'\n                }]}\n                layout={{width: 500,\n                        height: 500, \n                        title: this.state.StockName,\n                        transition: {\n                        duration: 500,\n                        easing: 'cubic-in-out'\n                        },\n                        frame: {\n                        duration: 500\n                        }}}\n                        />\n            </div>\n\n        )\n\n    }\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}